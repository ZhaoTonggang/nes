// 严格模式
"use strict";
// 页面载入
const url = window.location.href;
if (window.top != window) {
	alert('当您看到这条提示意味着：您所访问的网站正在恶意调用本站资源，本站对偷盗资源的行为0容忍，点击确认跳转正版体验。');
	window.open(url, '_self');
} else if (url.indexOf('index') > -1) {
	window.open('./', '_self');
}
// 取得资源
let timeout = null;
const search = document.getElementById('search');
const cdtopbt = document.getElementById("cd-top");
const title = document.title;
// 数据加载
const intdata = () => {
	fetch('./list.json', {
			methods: 'GET',
			cache: 'force-cache',
			mode: 'same-origin'
		})
		.then(response => {
			return response.json();
		})
		.then(datas => {
			// 数据容器
			let data;
			let item = "";
			const app = document.getElementById('app');
			const searchV = search.value.replace(/(^\s*)|(\s*$)/g, '');
			if (searchV === '') {
				data = datas;
			} else {
				data = datas.filter(array => array.n.match(searchV));
				if (data.length === 0) {
					app.innerHTML = '<h1 id="apph">什么东东都没有，换个词试试丫!</h1>';
					return;
				}
			}
			for (let j = 0; j < data.length; j++) {
				let span1 = data[j].v ? '<span class="item_p2">' + data[j].v + '</span>' : '';
				let span2 = data[j].c ? '<span class="item_p3">' + data[j].c + '</span>' : '';
				let opgamev = data[j].v ? '(' + data[j].v + ')' : '';
				let purl = encodeURI('./play/?n=' + data[j].n + opgamev + '&i=' + data[j].i);
				item += '<a href="' + purl + '" title="' + data[j].n + opgamev +
					'" target="_self"><div class="item">' +
					'<div class="img_box"><img src="./imgs/' + data[j].i + '.png" alt="' + data[j].n + opgamev +
					'">' +
					span1 + span2 + '</div><p class="item_p1">' + data[j].n + '</p></div></a>';
			}
			app.innerHTML = item;
		})
		.catch(err => {
			document.getElementById('apph').innerHTML = '获取数据失败<br />请尝试“异常修复”<br />[错误代码:404]';
			console.error('[404]错误日志：', err);
		})
}
intdata();
//标题判断
window.addEventListener('visibilitychange', () => {
	if (document.hidden) {
		//窗口不可见
		document.title = '(つ ェ ⊂)我藏好了哦~';
	} else {
		//窗口可见
		document.title = '(*゜ロ゜)ノ被发现了~';
		setTimeout(() => {
			document.title = title;
		}, 3000);
	}
})
//返回顶部
const cdTop = () => {
	document.documentElement.scrollTop = 0;
	document.body.scrollTop = 0;
}
// 监听屏幕滚动
window.addEventListener('scroll', () => {
	if (timeout !== null) {
		clearTimeout(timeout);
	}
	timeout = setTimeout(() => {
		let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
		// 返回顶部
		if (scrollTop > 100) {
			cdtopbt.className = "cdtopVis";
		} else {
			cdtopbt.className = "cdtopHid";
		};
	}, 500);
})
// 回车搜索
window.onkeydown = () => {
	if (window.event && window.event.keyCode == 13 && search == document.activeElement) {
		intdata();
	}
}
// 程序修复
const fixsys = () => {
	const yesfix = confirm('确认运行修复程序吗？系统将清除本地缓存并向云端请求最新的数据包，这将有效应对绝大多数异常情况。');
	if (yesfix == true) {
		localStorage.clear();
		sessionStorage.clear();
		window.location.reload(true);
	}
}
// 移除遮罩
document.body.classList.remove("is-loading");
// SVG图标库
window._iconfont_svg_string_ =
	'<svg><symbol id="icon-guanyu" viewBox="0 0 1024 1024"><path d="M491.776 352c12.864 0 52.48-6.144 65.152-18.304a61.056 61.056 0 0 0 18.88-45.504 61.248 61.248 0 0 0-18.88-45.184 62.464 62.464 0 0 0-45.248-18.56 61.312 61.312 0 0 0-44.48 18.304 61.312 61.312 0 0 0-18.688 45.44c0 18.432 6.336 33.664 18.88 45.76 12.608 12.032 11.904 18.048 24.384 18.048zM512 32C246.912 32 32 246.848 32 512s214.912 480 480 480c265.152 0 480-214.848 480-480S777.152 32 512 32z m0 896a416 416 0 1 1 0-832 416 416 0 0 1 0 832z m39.488-278.528l-14.912 14.848 39.744-210.816c0.256-1.408-0.192-2.816-0.128-4.224v-0.64a30.592 30.592 0 0 0-9.408-22.72l-0.256-0.448c-0.192-0.192-0.448-0.192-0.64-0.384a33.28 33.28 0 0 0-12.992-7.424c-1.664-0.512-3.008-1.472-4.8-1.728-1.216-0.192-2.432 0.128-3.712 0.064l-3.136 0.064a34.24 34.24 0 0 0-29.504 17.216L425.472 519.488a33.152 33.152 0 1 0 47.04 46.976l14.848-14.848-39.68 210.816c-0.256 1.472 0.192 2.816 0.128 4.288v0.64a30.272 30.272 0 0 0 9.408 22.72l0.256 0.384 0.64 0.448a35.456 35.456 0 0 0 12.992 7.36c1.6 0.512 2.944 1.408 4.736 1.728 1.28 0.192 2.496-0.192 3.776-0.064l3.136-0.128a34.048 34.048 0 0 0 29.504-17.152l86.272-86.272a33.152 33.152 0 1 0-47.04-46.912z" fill="" ></path></symbol><symbol id="icon-youxi" viewBox="0 0 1024 1024"><path d="M378.481778 227.555556C217.201778 227.555556 85.333333 360.647111 85.333333 526.222222 85.333333 691.825778 217.258667 824.888889 378.481778 824.888889a12.145778 12.145778 0 0 0 11.52-8.334222l2.616889-7.879111A142.08 142.08 0 0 1 527.559111 711.111111h40.760889a42.666667 42.666667 0 1 1 0 85.333333h-40.760889c-24.462222 0-46.222222 15.701333-53.873778 38.968889l-2.588444 7.850667A97.507556 97.507556 0 0 1 378.424889 910.222222C168.817778 910.222222 0 737.649778 0 526.222222 0 314.823111 168.846222 142.222222 378.481778 142.222222h267.036444C855.210667 142.222222 1024 314.823111 1024 526.222222 1024 737.649778 855.210667 910.222222 645.518222 910.222222a42.666667 42.666667 0 1 1 0-85.333333C806.798222 824.888889 938.666667 691.825778 938.666667 526.222222 938.666667 360.647111 806.741333 227.555556 645.518222 227.555556h-267.064889 0.056889z" fill="#000000" ></path><path d="M327.111111 373.845333a42.666667 42.666667 0 0 1 42.666667 42.666667V483.555556h66.360889a42.666667 42.666667 0 0 1 0 85.333333h-66.332445v67.043555a42.666667 42.666667 0 0 1-85.333333 0V568.888889H218.026667a42.666667 42.666667 0 0 1 0-85.333333h66.389333v-67.043556a42.666667 42.666667 0 0 1 42.666667-42.666667h0.056889z m381.610667 0a42.666667 42.666667 0 0 1 42.666666 42.666667v24.376889a42.666667 42.666667 0 0 1-85.333333 0v-24.376889a42.666667 42.666667 0 0 1 42.666667-42.666667z m0 195.043556a42.666667 42.666667 0 0 1 42.666666 42.666667v24.376888a42.666667 42.666667 0 0 1-85.333333 0V611.555556a42.666667 42.666667 0 0 1 42.666667-42.666667z" fill="#000000" ></path></symbol><symbol id="icon-shequ-jihuo" viewBox="0 0 1024 1024"><path d="M242.7 782.1c5.4 5.4 10.9 10.5 16.5 15.5 19.8-3.6 42.9-10.9 68.7-22.1-82.9-58.4-137.2-154.8-137.2-263.6 0-177.7 144.5-322.2 322.2-322.2 108.2 0 204 53.6 262.5 135.6 11-25.9 18-49.6 21-69.7-4.3-4.7-8.7-9.4-13.2-13.9-35.1-35.1-76-62.6-121.5-81.9-47.1-19.9-97.2-30-148.8-30-51.6 0-101.6 10.1-148.8 30-45.5 19.3-86.4 46.8-121.5 81.9-35.1 35.1-62.6 76-81.9 121.5-19.9 47.1-30 97.2-30 148.8 0 51.6 10.1 101.6 30 148.8 19.4 45.3 47 86.2 82 121.3zM867.5 405.5c-9.8 21.2-21.5 43-34.9 65.2 1.7 13.5 2.6 27.2 2.6 41.1C835.2 689.5 690.7 834 513 834c-13.6 0-26.9-0.9-40.1-2.5-23.2 14.1-46 26.4-68.1 36.7-4.6 2.1-9.1 4.1-13.6 6 39.1 13.1 80 19.8 121.8 19.8 51.6 0 101.6-10.1 148.8-30 45.5-19.3 86.4-46.8 121.5-81.9 35.1-35.1 62.6-76 81.9-121.5 19.9-47.1 30-97.2 30-148.8 0-42.3-6.8-83.7-20.3-123.2-2.3 5.6-4.8 11.2-7.4 16.9z" fill="#000002" ></path><path d="M849.3 174.2c-15.2-15.2-43.8-32.6-93.5-29.2-24.7 1.7-52.4 8.3-82.5 19.7 25 11.5 48.5 25.7 70.3 42.2 9.1-1.6 17.5-2.4 25-2.4 17.3 0 30.3 4.1 38.3 12 20.6 20.6 14.4 74.8-16.4 141.4-36.4 78.7-101.7 167.3-183.9 249.5C460.1 754.1 323.2 819.8 254 819.8c-17.3 0-30.3-4.1-38.3-12-11.9-11.9-15.1-35.3-8.9-67.1-16.3-21.8-30.2-45.2-41.6-70.1-12.2 31.5-19.2 60.4-21 86.1-3.5 49.7 13.9 78.3 29.2 93.5 13.9 13.9 38.9 29.6 81 29.6 4 0 8.2-0.1 12.5-0.4 33.5-2.3 72.3-13.6 115.4-33.5C467.3 806.6 562 737 649.1 650S805.7 468.2 845 383.2c19.9-43.1 31.2-81.9 33.5-115.4 3.5-49.8-13.9-78.4-29.2-93.6z" fill="#000002" ></path><path d="M491.022975 310.036021a30 30 0 1 0 42.425667-42.427147 30 30 0 1 0-42.425667 42.427147Z" fill="#000002" ></path><path d="M267.537509 533.397692a30 30 0 1 0 42.425666-42.427148 30 30 0 1 0-42.425666 42.427148Z" fill="#000002" ></path><path d="M477.9 477.3c-7.6 7.6-16.4 13.4-26.2 17.4-9.5 3.9-19.5 5.8-29.8 5.8s-20.3-2-29.8-5.8c-7.7-3.1-11.4-11.9-8.3-19.5 3.1-7.7 11.9-11.4 19.5-8.3 5.9 2.4 12.1 3.6 18.5 3.6s12.6-1.2 18.5-3.6c6.1-2.5 11.6-6.1 16.3-10.8 4.7-4.7 8.3-10.2 10.8-16.3 2.4-5.9 3.6-12.1 3.6-18.5s-1.2-12.6-3.6-18.5c-3.1-7.7 0.6-16.4 8.3-19.5 7.7-3.1 16.4 0.6 19.5 8.3 3.9 9.5 5.8 19.5 5.8 29.8s-2 20.3-5.8 29.8c-3.9 9.7-9.7 18.5-17.3 26.1z" fill="#000002" ></path></symbol><symbol id="icon-xinyongxiufu" viewBox="0 0 1024 1024"><path d="M204.844988 908.776947c-49.406997 0-89.597995-40.203998-89.597995-89.596995s40.190998-89.597995 89.597995-89.597995 89.597995 40.203998 89.597995 89.597995-40.190998 89.596995-89.597995 89.596995z m0-127.996993c-21.169999 0-38.398998 17.228999-38.398998 38.399998s17.228999 38.398998 38.399998 38.398998 38.397998-17.228999 38.397998-38.399998-17.227999-38.398998-38.398998-38.398998z" fill="#333333" ></path><path d="M205.305988 1023.99994a203.898988 203.898988 0 0 1-130.377992-46.999997A204.205988 204.205988 0 0 1 0.998 838.032951a204.231988 204.231988 0 0 1 46.026997-150.510991 215.546987 215.546987 0 0 1 27.813999-27.825999l403.662976-332.86898 32.575998 39.499998-403.573976 332.79198a166.22999 166.22999 0 0 0-21.016999 21.003999 153.339991 153.339991 0 0 0-34.533998 112.994993 153.339991 153.339991 0 0 0 55.524997 104.368994 153.429991 153.429991 0 0 0 112.982993 34.571998 153.698991 153.698991 0 0 0 104.431994-55.549997l332.79198-403.561976 39.499998 32.574998-332.79198 403.560976a204.487988 204.487988 0 0 1-139.016992 73.930996c-6.707 0.666-13.400999 0.986-20.069999 0.986z" fill="#333333" ></path><path d="M856.33595 1023.98694c-37.592998 0-73.827996-12.569999-103.715994-36.286998a179.246989 179.246989 0 0 1-26.916999-26.865998L524.107969 706.849959l40.100998-31.819999 201.466988 253.816986c5.44 6.72 12.197999 13.490999 18.879999 18.840998a115.427993 115.427993 0 0 0 85.398995 24.319999 115.389993 115.389993 0 0 0 77.693995-43.159997c39.755998-50.123997 31.333998-123.350993-18.789998-163.221991L659.450961 551.742968l31.819998-40.100998 269.445985 213.881987c72.215996 57.444997 84.324995 162.92699 27.032998 235.129987a166.13999 166.13999 0 0 1-111.945993 62.193996 166.30299 166.30299 0 0 1-19.467999 1.14zM197.612988 338.35998a139.899992 139.899992 0 0 1-99.567994-41.240997L7.55 206.611988a25.599999 25.599999 0 0 1 0-36.196998L170.46499 7.5a25.599999 25.599999 0 0 1 36.197998 0l90.505995 90.492994c26.597998 26.597998 41.239998 61.963996 41.239997 99.569994s-14.641999 72.969996-41.239997 99.567995a139.887992 139.887992 0 0 1-99.555995 41.227997zM61.846996 188.513989l72.394996 72.406996a89.046995 89.046995 0 0 0 63.370996 26.239998c23.935999 0 46.424997-9.317999 63.345997-26.239998 16.933999-16.919999 26.251998-39.422998 26.251998-63.357997s-9.317999-46.436997-26.239998-63.370996l-72.406996-72.394996L61.846996 188.513989z" fill="#333333" ></path><path d="M413.607976 439.156974a25.470999 25.470999 0 0 1-18.098999-7.499999L260.984985 297.130983a25.599999 25.599999 0 1 1 36.196998-36.197998L431.706975 395.459977a25.599999 25.599999 0 0 1-18.098999 43.697997z m328.82398 124.028993c-155.272991 0-281.592984-126.319993-281.592983-281.592983S587.158966 0 742.431956 0c24.549999 0 49.073997 3.213 72.893996 9.573999a25.611998 25.611998 0 0 1 18.136999 31.333999 25.573999 25.573999 0 0 1-31.333998 18.136999 231.519986 231.519986 0 0 0-59.696997-7.846c-127.036993 0-230.393987 103.356994-230.393986 230.393987s103.356994 230.393987 230.393986 230.393986S972.825943 408.629976 972.825943 281.592984c0-20.095999-2.637-40.190998-7.833-59.722997a25.599999 25.599999 0 0 1 49.469998-13.170999 283.164983 283.164983 0 0 1 9.561999 72.893996c0 155.272991-126.319993 281.592984-281.592984 281.592983z" fill="#333333" ></path><path d="M832.976951 344.73398c-41.022998 0-79.613995-15.999999-108.643993-45.041998a152.533991 152.533991 0 0 1-45.003998-108.592993c0-41.163998 15.999999-79.741995 45.054998-108.629994l66.250996-66.264996a25.599999 25.599999 0 1 1 36.197998 36.209998L760.529955 118.729993a101.309994 101.309994 0 0 0-30.001998 72.381996c0 27.339998 10.649999 53.041997 30.001998 72.394996a101.820994 101.820994 0 0 0 72.446996 30.039998h0.064a101.462994 101.462994 0 0 0 72.266996-30.013998l66.327996-66.327997a25.599999 25.599999 0 1 1 36.196998 36.196998l-66.301996 66.302996a152.315991 152.315991 0 0 1-108.464994 45.041998l-0.09-0.013z" fill="#333333" ></path></symbol><symbol id="icon-qitaguanggaoshuju" viewBox="0 0 1024 1024"><path d="M800 812.8h-576c-19.2 0-32-12.8-32-32s12.8-32 32-32h576c19.2 0 32 12.8 32 32s-12.8 32-32 32z" fill="#333333" ></path><path d="M832 128c38.4 0 64 25.6 64 64v640c0 38.4-25.6 64-64 64H192c-38.4 0-64-25.6-64-64V192c0-38.4 25.6-64 64-64h640m0-64H192c-70.4 0-128 57.6-128 128v640c0 70.4 57.6 128 128 128h640c70.4 0 128-57.6 128-128V192c0-70.4-57.6-128-128-128z" fill="#333333" ></path><path d="M499.2 588.8c0 12.8-6.4 19.2-19.2 19.2h-19.2c-12.8 0-19.2-6.4-19.2-19.2l-32-70.4H268.8l-25.6 70.4c-6.4 12.8-12.8 19.2-25.6 19.2h-12.8c-12.8 0-19.2-6.4-19.2-19.2 0-6.4 0-12.8 6.4-19.2l108.8-275.2c6.4-19.2 19.2-25.6 38.4-25.6h6.4c19.2 0 32 12.8 38.4 25.6l108.8 275.2c0 6.4 6.4 19.2 6.4 19.2zM396.8 467.2L339.2 320l-51.2 147.2h108.8zM576 608c-32 0-44.8-12.8-44.8-44.8V313.6c0-32 12.8-44.8 44.8-44.8h70.4c108.8 0 172.8 57.6 172.8 172.8 0 108.8-64 172.8-172.8 172.8H576z m185.6-172.8c0-76.8-38.4-121.6-115.2-121.6h-57.6v243.2h57.6c83.2 6.4 115.2-38.4 115.2-121.6z" fill="#333333" ></path></symbol><symbol id="icon-feedback" viewBox="0 0 1024 1024"><path d="M796.757333 756.736A373.998933 373.998933 0 0 0 887.466667 512c0-207.36-168.106667-375.466667-375.466667-375.466667S136.533333 304.64 136.533333 512s168.106667 375.466667 375.466667 375.466667h348.842667a16.3328 16.3328 0 0 0 10.8544-28.5184l-72.413867-64.375467a27.0336 27.0336 0 0 1-2.525867-37.8368z m108.9536 63.931733A67.5328 67.5328 0 0 1 860.859733 938.666667H512C276.360533 938.666667 85.333333 747.639467 85.333333 512S276.360533 85.333333 512 85.333333s426.666667 191.0272 426.666667 426.666667a425.0112 425.0112 0 0 1-88.081067 259.669333l55.125333 48.9984z" fill="#404040" ></path><path d="M358.4 580.266667m25.6 0l136.533333 0q25.6 0 25.6 25.6l0 0q0 25.6-25.6 25.6l-136.533333 0q-25.6 0-25.6-25.6l0 0q0-25.6 25.6-25.6Z" fill="#404040" ></path><path d="M358.4 426.666667m25.6 0l256 0q25.6 0 25.6 25.6l0 0q0 25.6-25.6 25.6l-256 0q-25.6 0-25.6-25.6l0 0q0-25.6 25.6-25.6Z" fill="#404040" ></path></symbol></svg>',
	function(l) {
		var t = (t = document.getElementsByTagName("script"))[t.length - 1],
			a = t.getAttribute("data-injectcss"),
			t = t.getAttribute("data-disable-injectsvg");
		if (!t) {
			var e, c, i, n, o, h = function(t, a) {
				a.parentNode.insertBefore(t, a)
			};
			if (a && !l.__iconfont__svg__cssinject__) {
				l.__iconfont__svg__cssinject__ = !0;
				try {
					document.write(
						"<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>"
						)
				} catch (t) {
					console && console.log(t)
				}
			}
			e = function() {
					var t, a = document.createElement("div");
					a.innerHTML = l._iconfont_svg_string_, (a = a.getElementsByTagName("svg")[0]) && (a.setAttribute(
							"aria-hidden", "true"), a.style.position = "absolute", a.style.width = 0, a.style
						.height = 0, a.style.overflow = "hidden", a = a, (t = document.body).firstChild ? h(a, t
							.firstChild) : t.appendChild(a))
				}, document.addEventListener ? ~["complete", "loaded", "interactive"].indexOf(document.readyState) ?
				setTimeout(e, 0) : (c = function() {
					document.removeEventListener("DOMContentLoaded", c, !1), e()
				}, document.addEventListener("DOMContentLoaded", c, !1)) : document.attachEvent && (i = e, n = l
					.document, o = !1, s(), n.onreadystatechange = function() {
						"complete" == n.readyState && (n.onreadystatechange = null, d())
					})
		}

		function d() {
			o || (o = !0, i())
		}

		function s() {
			try {
				n.documentElement.doScroll("left")
			} catch (t) {
				return void setTimeout(s, 50)
			}
			d()
		}
	}(window);